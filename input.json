{
  "input": {
    "image_url": "https://example.com/portrait.jpg",
    "audio_url": "https://example.com/speech.mp3",
    "width": 639,
    "height": 640,
    "_comment_width": "OPTIONAL: Override output width (default: 639). Remove this line for default.",
    "_comment_height": "OPTIONAL: Override output height (default: 640). Remove this line for default.",
    "workflow": {
      "comment": "Complete WanVideo 2.1 InfiniteTalk workflow - see workflow_api_wanvideo.json for full reference",
      "120": {
        "inputs": {"model": "Wan2_1-InfiniteTalk_Single_Q6_K_2.gguf"},
        "class_type": "MultiTalkModelLoader"
      },
      "122": {
        "inputs": {
          "block_swap_args": ["134", 0],
          "lora": ["138", 0],
          "multitalk_model": ["120", 0],
          "model": "wan2.1-i2v-14b-480p-Q4_0_2.gguf",
          "base_precision": "bf16",
          "quantization": "disabled",
          "load_device": "offload_device",
          "attention_mode": "sageattn"
        },
        "class_type": "WanVideoModelLoader"
      },
      "129": {
        "inputs": {"model_name": "wan_2.1_vae.safetensors", "precision": "bf16"},
        "class_type": "WanVideoVAELoader"
      },
      "130": {
        "inputs": {
          "vae": ["129", 0],
          "samples": ["213", 0],
          "enable_vae_tiling": false,
          "tile_x": 272,
          "tile_y": 272,
          "tile_stride_x": 144,
          "tile_stride_y": 128,
          "normalization": "default"
        },
        "class_type": "WanVideoDecode"
      },
      "131": {
        "inputs": {
          "images": ["130", 0],
          "audio": ["159", 0],
          "frame_rate": ["229", 0],
          "loop_count": 0,
          "filename_prefix": "WanVideo2_1_multitalk",
          "format": "video/h264-mp4",
          "pingpong": false,
          "save_output": true
        },
        "class_type": "VHS_VideoCombine"
      },
      "134": {
        "inputs": {
          "blocks_to_swap": 40,
          "offload_img_emb": false,
          "offload_txt_emb": false,
          "use_non_blocking": true,
          "vace_blocks_to_swap": 0,
          "prefetch_blocks": 0,
          "block_swap_debug": false
        },
        "class_type": "WanVideoBlockSwap"
      },
      "135": {
        "inputs": {
          "t5": ["136", 0],
          "positive_prompt": "A woman is talking",
          "negative_prompt": "bright tones, overexposed, static, blurred details, subtitles",
          "force_offload": true,
          "use_disk_cache": false,
          "device": "gpu"
        },
        "class_type": "WanVideoTextEncode"
      },
      "136": {
        "inputs": {
          "model_name": "umt5-xxl-enc-fp8_e4m3fn.safetensors",
          "precision": "bf16",
          "load_device": "offload_device",
          "quantization": "disabled"
        },
        "class_type": "LoadWanVideoT5TextEncoder"
      },
      "137": {
        "inputs": {
          "model": "TencentGameMate/chinese-wav2vec2-base",
          "base_precision": "fp16",
          "load_device": "main_device"
        },
        "class_type": "DownloadAndLoadWav2VecModel"
      },
      "138": {
        "inputs": {
          "lora": "Wan2.1-lightx2v_I2V_14B_480p_cfg_step_distill_rank64_bf16.safetensors",
          "strength": 0.8,
          "low_mem_load": false,
          "merge_loras": false
        },
        "class_type": "WanVideoLoraSelect"
      },
      "159": {
        "inputs": {
          "audio": ["217", 0],
          "start_time": "0:00",
          "end_time": "0:07"
        },
        "class_type": "AudioCrop"
      },
      "170": {
        "inputs": {
          "audio": ["159", 0],
          "chunk_fade_shape": "linear",
          "chunk_length": 10.0,
          "chunk_overlap": 0.1
        },
        "class_type": "AudioSeparation"
      },
      "171": {
        "inputs": {
          "image": ["207", 0],
          "width": ["210", 0],
          "height": ["211", 0],
          "upscale_method": "lanczos",
          "keep_proportion": "pad_edge",
          "pad_color": "0, 0, 0",
          "crop_position": "center",
          "divisible_by": 2,
          "device": "cpu"
        },
        "class_type": "ImageResizeKJv2"
      },
      "173": {
        "inputs": {"clip_name": "clip_vision_h.safetensors"},
        "class_type": "CLIPVisionLoader"
      },
      "177": {
        "inputs": {
          "backend": "inductor",
          "fullgraph": false,
          "mode": "default",
          "dynamic": false,
          "dynamo_cache_size_limit": 64,
          "compile_transformer_blocks_only": true,
          "dynamo_recompile_limit": 128
        },
        "class_type": "WanVideoTorchCompileSettings"
      },
      "192": {
        "inputs": {
          "vae": ["129", 0],
          "start_image": ["171", 0],
          "clip_embeds": ["193", 0],
          "width": ["210", 0],
          "height": ["211", 0],
          "frame_window_size": 81,
          "motion_frame": 9,
          "force_offload": false,
          "colormatch": "mkl",
          "tiled_vae": false
        },
        "class_type": "WanVideoImageToVideoMultiTalk"
      },
      "193": {
        "inputs": {
          "clip_vision": ["173", 0],
          "image_1": ["171", 0],
          "strength_1": 1.0,
          "strength_2": 1.0,
          "crop": "center",
          "combine_embeds": "average",
          "force_offload": true,
          "tiles": 0,
          "ratio": 0.5
        },
        "class_type": "WanVideoClipVisionEncode"
      },
      "194": {
        "inputs": {
          "wav2vec_model": ["137", 0],
          "audio_1": ["170", 3],
          "num_frames": ["214", 0],
          "fps": ["229", 0],
          "normalize_loudness": true,
          "audio_scale": 1.0,
          "audio_cfg_scale": 1.0,
          "multi_audio_type": "para"
        },
        "class_type": "MultiTalkWav2VecEmbeds"
      },
      "207": {
        "inputs": {"image": "portrait.jpg"},
        "class_type": "LoadImage"
      },
      "208": {
        "inputs": {"images": ["171", 0]},
        "class_type": "PreviewImage"
      },
      "210": {
        "inputs": {"value": 639},
        "class_type": "INTConstant"
      },
      "211": {
        "inputs": {"value": 640},
        "class_type": "INTConstant"
      },
      "213": {
        "inputs": {
          "model": ["122", 0],
          "image_embeds": ["192", 0],
          "text_embeds": ["135", 0],
          "multitalk_embeds": ["194", 0],
          "steps": 4,
          "cfg": 1.0,
          "shift": 11.0,
          "seed": 0,
          "force_offload": true,
          "scheduler": "flowmatch_distill",
          "riflex_freq_index": 0,
          "denoise_strength": 1.0,
          "batched_cfg": false,
          "rope_function": "comfy",
          "start_step": 0,
          "end_step": -1,
          "add_noise_to_samples": false
        },
        "class_type": "WanVideoSampler"
      },
      "214": {
        "inputs": {"value": 175},
        "class_type": "INTConstant"
      },
      "217": {
        "inputs": {"audio": "speech.mp3", "audioUI": ""},
        "class_type": "LoadAudio"
      },
      "229": {
        "inputs": {"value": 25.0},
        "class_type": "PrimitiveFloat"
      }
    }
  }
}
